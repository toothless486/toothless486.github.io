---
title:  "히스토그램에서 가장 큰 직사각형"
excerpt: "백준6549"

toc: true
toc_sticky: true

published: true

categories:
  - Algorithms
tags:
  - stack
sitemap:
  changefreq: daily
  priority: 0.8
---

### 코드
```c++
#include <iostream>
#include <stack>
#include <vector>
using namespace std;

int main()
{
    long long n = 1;
    while(n != 0)
    {
        cin >> n;        
        if(n == 0) break;

        vector<long long> arr(n+1, 0);
        stack<int> s;
        long long max = 0;

        s.push(0);
        for(long long index=1; index<=n; index++)
        {
            cin >> arr[index];
            if(s.empty())
            {
                s.push(index);
                continue;
            }

            if(arr[s.top()] <= arr[index])
            {
                s.push(index);
                continue;
            }

            while(!s.empty() && arr[s.top()] > arr[index])
            {
                int right = index - 1;
                long long height = arr[s.top()];
                s.pop();

                int left = s.top();
                int width = right - left;
                long long size = height * width;

                if(max < size) max = size;
            }
            s.push(index);
        }

        long long right = n;
        while(!s.empty())
        {
            long long height = arr[s.top()];
            s.pop();

            int left = 0;
            if(!s.empty())
            {
                left = s.top();
            }

            int width = right - left;
            
            long long size = height * width;

            if(max < size) max = size;
        }
        cout << max << "\n";
    }
    return 0;
}
```

### 문제 해결
1. 반례
input 4 1 4 3 3 일 때, 최댓값 9가 나오지 않았습니다.
정확한 left 값을 구하기 위해서는 pop을 해아 합니다. pop을 하고 나면은 왼쪽의 위치가 나옵니다.

2. 런타임 에러 (NZEC)
https://help.acmicpc.net/judge/rte/NZEC
input 7 2 1 4 5 1 3 3 으로 주어졌을 때 런타임 에러 발생하였습니다.
index의 시작을 1로 두고 index <= n 까지 돌리면서 해결하였습니다.