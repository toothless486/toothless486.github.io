---
title:  "6549 히스토그램에서 가장 큰 직사각형"
classes: wide
categories:
    Algorithms
tags:
    stack
---
### 느낀 점

- stack의 top보다 사이즈가 큰 사각형은 stack에 들어올  수  없다.
- stack에 들어가는 건 사각형들의 index이다.  index는 1로 시작하는게 편하더라  !
- 많은 곳에서 left, right 라고 적어 놓았다.  무슨 말인가 하니, 첫 번째 사각형의 index는 1이다. 해당 사각형의  left는 0, right는 2이다. 줄지어 서있는 사각형 아래에  눈금자를 그려넣으면  보기 편하다.
- 맨앞의 사각형부터 사이즈를 재면서 올라갔는데, 코드를 보니 stack은 뒤에서부터 사이즈를 재는 느낌이다. 물론 사이즈를 잴 때는,  top보다  큰 사각형을  만났을  때이다. pop을 하면서 뒤에서 앞으로  사이즈를 재고 있다.
- 코드를 봐도 이해하는데 참 오래걸렸다…

### 코드

```
#include <iostream>
#include <stack>
#include <vector>
using namespace std;

int main()
{
    long long n = 1;
    while(n != 0)
    {
        cin >> n;
        if(n == 0) break;

        vector<long long> arr(n+1, 0);
        stack<int> s;
        long long max = 0;

        s.push(0);
        for(long long index=1; index<=n; index++)
        {
            cin >> arr[index];
            if(s.empty())
            {
                s.push(index);
                continue;
            }

            if(arr[s.top()] <= arr[index])
            {
                s.push(index);
                continue;
            }

            while(!s.empty() && arr[s.top()] > arr[index])
            {
                int right = index - 1;
                long long height = arr[s.top()];
                s.pop();

                int left = s.top();
                int width = right - left;
                long long size = height * width;

                if(max < size) max = size;
            }
            s.push(index);
        }

        long long right = n;
        while(!s.empty())
        {
            long long height = arr[s.top()];
            s.pop();

            int left = 0;
            if(!s.empty())
            {
                left = s.top();
            }

            int width = right - left;

            long long size = height * width;

            if(max < size) max = size;
        }
        cout << max << "\\n";
    }
    return 0;
}

```

### 문제 해결

1. 반례
    1. input 4 1 4 3 3 일 때, 최댓값 9가 나오지 않았다.
    2. 정확한 left 값을 구하기 위해서는 pop을 해야 한다. pop을 하고 나면은 왼쪽의 위치가 나온다.
2. 런타임 에러 (NZEC)
    1. [https://help.acmicpc.net/judge/rte/NZEC](https://help.acmicpc.net/judge/rte/NZEC)
    2. input 7 2 1 4 5 1 3 3 으로 주어졌을 때 런타임 에러 발생하였다.  index의 시작을 1로 두고 index <= n 까지 돌리면서 해결 !